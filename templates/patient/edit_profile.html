{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <div class="card shadow-sm">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0"><i class="bi bi-pencil-square"></i> 编辑个人信息</h5>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">姓名 <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" name="name" value="{{ patient.name }}" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="phone" class="form-label">联系电话</label>
                            <input type="text" class="form-control" id="phone" name="phone" value="{{ patient.phone }}">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="address" class="form-label">联系地址</label>
                        <input type="text" class="form-control" id="address" name="address" value="{{ patient.address }}">
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="emergency_contact" class="form-label">紧急联系人</label>
                            <input type="text" class="form-control" id="emergency_contact" name="emergency_contact" value="{{ patient.emergency_contact }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="emergency_phone" class="form-label">紧急联系人电话</label>
                            <input type="text" class="form-control" id="emergency_phone" name="emergency_phone" value="{{ patient.emergency_phone }}">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="blood_type" class="form-label">血型</label>
                        <select class="form-select" id="blood_type" name="blood_type">
                            <option value="">请选择</option>
                            <option value="A" {% if patient.blood_type == 'A' %}selected{% endif %}>A型</option>
                            <option value="B" {% if patient.blood_type == 'B' %}selected{% endif %}>B型</option>
                            <option value="AB" {% if patient.blood_type == 'AB' %}selected{% endif %}>AB型</option>
                            <option value="O" {% if patient.blood_type == 'O' %}selected{% endif %}>O型</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="allergy_history" class="form-label">过敏史</label>
                        <textarea class="form-control" id="allergy_history" name="allergy_history" rows="3">{{ patient.allergy_history }}</textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="medical_history" class="form-label">既往病史</label>
                        <textarea class="form-control" id="medical_history" name="medical_history" rows="3">{{ patient.medical_history }}</textarea>
                    </div>
                    
                    <div class="d-flex justify-content-between">
                        <a href="{% url 'patient_dashboard' %}" class="btn btn-secondary">取消</a>
                        <button type="submit" class="btn btn-primary">保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

